(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(8793)}])},8793:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return _}});var l=t(5893),s=t(7294);let o=()=>{let[e,n]=(0,s.useState)([[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]]),[t,l]=(0,s.useState)([[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]]),o=e=>e.toString().padStart(3,"0");return{userInput:e,bombMap:t,setUserInput:n,setBombMap:l,board:[[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1]],directions:[[-1,0],[-1,-1],[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1]],formatFlagCount:o}},r=()=>{let{userInput:e,bombMap:n,setUserInput:t,setBombMap:l,board:r,directions:a}=o(),i=e.some(e=>e.some(e=>0!==e)),c=e.some((e,t)=>e.some((e,l)=>1===e&&1===n[t][l])),[d,_]=(0,s.useState)(0);(0,s.useEffect)(()=>{let e;return i?e=setInterval(()=>{_(e=>e+1)},1e3):clearInterval(e),c&&clearInterval(e),()=>{clearInterval(e)}},[i,c]);let m=(e,t)=>{let l=0;for(let[s,o]of a){let r=e+s,a=t+o;r>=0&&r<n[0].length&&a>=0&&a<n.length&&1===n[r][a]&&l++}if(r[e][t]=l,0===l)for(let[l,s]of a){let o=e+l,a=t+s;o>=0&&o<n[0].length&&a>=0&&a<n.length&&-1===r[o][a]&&m(o,a)}},x=!1,f=!1,g=()=>{for(let t=0;t<e.length;t++)for(let l=0;l<e[t].length;l++)1===e[t][l]?(1===n[t][l]&&(r[t][l]=11,x=!0,r.forEach((e,t)=>e.forEach((e,l)=>{1===n[t][l]&&(r[t][l]=11)})),console.log("ゲームオーバー")),0===n[t][l]&&m(t,l)):3===e[t][l]&&(r[t][l]=10),r.some(e=>e.includes(-1))||(f=!0);return r};g();let h=0===e.flat().filter(e=>1===e).length,u=(s,o)=>{console.log(s,o);for(let n=0;n<e.length;n++)for(let t=0;t<e[n].length;t++)if(11===r[n][t]||!r.some(e=>e.includes(-1)))return;let a=[...e];if(a[s][o]=1,t(a),console.log("ターン変わった！"),console.log("userInput↓"),console.table(e),h){let e=[...n],t=0;for(;t<10;){let n=Math.floor(9*Math.random()),r=Math.floor(9*Math.random());n!==s&&r!==o&&1!==e[n][r]&&(e[n][r]=1,t++),l(e)}}console.log("BombMap↓"),console.table(n),g(),console.log("board↓"),console.table(r)},v=(n,l,s)=>{n.preventDefault();for(let n=0;n<e.length;n++)for(let t=0;t<e[n].length;t++)if(11===r[n][t]||!r.some(e=>e.includes(-1)))return;let o=[...e];0===o[l][s]?o[l][s]=3:3===o[l][s]&&(o[l][s]=0),t(o)},b=e.flat().filter(e=>1===e).length,j=e.flat().filter(e=>3===e).length;return{userInput:e,bombMap:n,isPlaying:i,isFailure:c,timer:d,setTimer:_,gameOver:x,gameWin:f,board:r,onClick:u,onRightClick:v,clickCount:b,flagCount:j}},a=()=>{let e=e=>{let n=Math.floor(e/60).toString().padStart(1,"0"),t=(e%60).toString().padStart(2,"0");return"".concat(n).concat(t)};return{formatTime:e}};var i=t(2729),c=t.n(i);let d=()=>{let{board:e,timer:n,gameWin:t,gameOver:s,onClick:i,onRightClick:d,clickCount:_,flagCount:m}=r(),{formatFlagCount:x}=o(),{formatTime:f}=a();return(0,l.jsxs)("div",{className:c().container,children:[(0,l.jsxs)("div",{className:c().center,children:[(0,l.jsxs)("div",{className:c().top,children:[(0,l.jsx)("div",{className:c().left,children:x(10-m)}),!s&&!t&&(0,l.jsx)("div",{className:c().betweensmile}),s&&(0,l.jsx)("div",{className:c().betweensad}),t&&(0,l.jsx)("div",{className:c().betweenwin}),(0,l.jsx)("div",{className:c().timelog,children:(0,l.jsx)("div",{children:f(n)})})]}),(0,l.jsx)("div",{className:c().board,children:e.map((e,n)=>e.map((e,t)=>(0,l.jsxs)("div",{className:c().cell,onClick:()=>i(n,t),onContextMenu:e=>d(e,n,t),children:[-1===e&&(0,l.jsx)("div",{className:c().stone}),0===e&&(0,l.jsx)("div",{className:c().stone0,style:{}}),e>0&&e<9&&(0,l.jsx)("div",{className:c().number,style:{backgroundPosition:-30*e+30}}),10===e&&(0,l.jsx)("div",{className:c().flag}),11===e&&(0,l.jsx)("div",{className:c().bom})]},"".concat(n,"-").concat(t))))})]}),(0,l.jsxs)("div",{className:c().rilog,children:[s&&(0,l.jsx)("div",{className:c().gameover,children:(0,l.jsx)("div",{children:(0,l.jsxs)("p",{children:["ゲームオーバー",(0,l.jsx)("br",{}),"時間:",f(n),(0,l.jsx)("br",{}),"クリック数：",_," + ",m]})})}),t&&(0,l.jsx)("div",{className:c().gamewin,children:(0,l.jsx)("div",{children:(0,l.jsxs)("p",{children:["おめでとう！",(0,l.jsx)("br",{}),"時間:",f(n)," ",(0,l.jsx)("br",{}),"クリック数:",_," + ",m]})})})]})]})};var _=d},2729:function(e){e.exports={container:"index_container__gnN1f",center:"index_center__CCiNa",top:"index_top__uMqHF",left:"index_left__OQaUt",betweensmile:"index_betweensmile__8WRy6",betweensad:"index_betweensad__RuTSt",betweenwin:"index_betweenwin__TJR5s",timelog:"index_timelog___gLIh",rilog:"index_rilog__dB4d8",gameover:"index_gameover__2nrQv",gamewin:"index_gamewin__4k7yS",board:"index_board__2d6xe",cell:"index_cell__3W8ZQ",stone:"index_stone__oeDmm",number:"index_number__l0yF_",stone0:"index_stone0__GU0r7",bom:"index_bom__ERRzB",flag:"index_flag__Bsg_z",hoge:"index_hoge__UVxRa"}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);