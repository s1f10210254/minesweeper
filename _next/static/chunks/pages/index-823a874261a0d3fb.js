(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(3511)}])},3511:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return d}});var l=t(5893),s=t(7294);let o=()=>{let[e,n]=(0,s.useState)([[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]]),[t,l]=(0,s.useState)([[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]]),o=e=>e.toString().padStart(3,"0"),a=e=>{let n=Math.floor(e/60).toString().padStart(1,"0"),t=(e%60).toString().padStart(2,"0");return"".concat(n).concat(t)};return{userInput:e,bombMap:t,setUserInput:n,setBombMap:l,board:[[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1]],directions:[[-1,0],[-1,-1],[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1]],formatFlagCount:o,formatTime:a}},a=()=>{let{userInput:e,bombMap:n,setUserInput:t,setBombMap:l,board:a,directions:r}=o(),i=e.some(e=>e.some(e=>0!==e)),c=e.some((e,t)=>e.some((e,l)=>1===e&&1===n[t][l])),[d,_]=(0,s.useState)(0);(0,s.useEffect)(()=>{let e;return i?e=setInterval(()=>{_(e=>e+1)},1e3):clearInterval(e),c&&clearInterval(e),()=>{clearInterval(e)}},[i,c]);let m=(e,t)=>{let l=0;for(let[s,o]of r){let a=e+s,r=t+o;a>=0&&a<n[0].length&&r>=0&&r<n.length&&1===n[a][r]&&l++}if(a[e][t]=l,0===l)for(let[l,s]of r){let o=e+l,r=t+s;o>=0&&o<n[0].length&&r>=0&&r<n.length&&-1===a[o][r]&&m(o,r)}},x=!1,f=!1,g=()=>{for(let t=0;t<e.length;t++)for(let l=0;l<e[t].length;l++)1===e[t][l]?(1===n[t][l]&&(a[t][l]=11,x=!0,a.forEach((e,t)=>e.forEach((e,l)=>{1===n[t][l]&&(a[t][l]=11)})),console.log("ゲームオーバー")),0===n[t][l]&&m(t,l)):3===e[t][l]&&(a[t][l]=10),a.some(e=>e.includes(-1))||(f=!0);return a};g();let h=0===e.flat().filter(e=>1===e).length,u=(s,o)=>{console.log(s,o);for(let n=0;n<e.length;n++)for(let t=0;t<e[n].length;t++)if(11===a[n][t]||!a.some(e=>e.includes(-1)))return;let r=[...e];if(r[s][o]=1,t(r),console.log("ターン変わった！"),console.log("userInput↓"),console.table(e),h){let e=[...n],t=0;for(;t<10;){let n=Math.floor(9*Math.random()),a=Math.floor(9*Math.random());n!==s&&a!==o&&1!==e[n][a]&&(e[n][a]=1,t++),l(e)}}console.log("BombMap↓"),console.table(n),g(),console.log("board↓"),console.table(a)},v=(n,l,s)=>{n.preventDefault();for(let n=0;n<e.length;n++)for(let t=0;t<e[n].length;t++)if(11===a[n][t]||!a.some(e=>e.includes(-1)))return;let o=[...e];0===o[l][s]?o[l][s]=3:3===o[l][s]&&(o[l][s]=0),t(o)},b=e.flat().filter(e=>1===e).length,j=e.flat().filter(e=>3===e).length;return{userInput:e,bombMap:n,isPlaying:i,isFailure:c,timer:d,setTimer:_,gameOver:x,gameWin:f,board:a,onClick:u,onRightClick:v,clickCount:b,flagCount:j}};var r=t(2729),i=t.n(r);let c=()=>{let{board:e,timer:n,gameWin:t,gameOver:s,onClick:r,onRightClick:c,clickCount:d,flagCount:_}=a(),{formatFlagCount:m,formatTime:x}=o();return(0,l.jsxs)("div",{className:i().container,children:[(0,l.jsxs)("div",{className:i().center,children:[(0,l.jsxs)("div",{className:i().top,children:[(0,l.jsx)("div",{className:i().left,children:m(10-_)}),!s&&!t&&(0,l.jsx)("div",{className:i().betweensmile}),s&&(0,l.jsx)("div",{className:i().betweensad}),t&&(0,l.jsx)("div",{className:i().betweenwin}),(0,l.jsx)("div",{className:i().timelog,children:(0,l.jsx)("div",{children:x(n)})})]}),(0,l.jsx)("div",{className:i().board,children:e.map((e,n)=>e.map((e,t)=>(0,l.jsxs)("div",{className:i().cell,onClick:()=>r(n,t),onContextMenu:e=>c(e,n,t),children:[-1===e&&(0,l.jsx)("div",{className:i().stone}),0===e&&(0,l.jsx)("div",{className:i().stone0,style:{}}),e>0&&e<9&&(0,l.jsx)("div",{className:i().number,style:{backgroundPosition:-30*e+30}}),10===e&&(0,l.jsx)("div",{className:i().flag}),11===e&&(0,l.jsx)("div",{className:i().bom})]},"".concat(n,"-").concat(t))))})]}),(0,l.jsxs)("div",{className:i().rilog,children:[s&&(0,l.jsx)("div",{className:i().gameover,children:(0,l.jsx)("div",{children:(0,l.jsxs)("p",{children:["ゲームオーバー",(0,l.jsx)("br",{}),"時間:",x(n),(0,l.jsx)("br",{}),"クリック数：",d," + ",_]})})}),t&&(0,l.jsx)("div",{className:i().gamewin,children:(0,l.jsx)("div",{children:(0,l.jsxs)("p",{children:["おめでとう！",(0,l.jsx)("br",{}),"時間:",x(n)," ",(0,l.jsx)("br",{}),"クリック数:",d," + ",_]})})})]})]})};var d=c},2729:function(e){e.exports={container:"index_container__gnN1f",center:"index_center__CCiNa",top:"index_top__uMqHF",left:"index_left__OQaUt",betweensmile:"index_betweensmile__8WRy6",betweensad:"index_betweensad__RuTSt",betweenwin:"index_betweenwin__TJR5s",timelog:"index_timelog___gLIh",rilog:"index_rilog__dB4d8",gameover:"index_gameover__2nrQv",gamewin:"index_gamewin__4k7yS",board:"index_board__2d6xe",cell:"index_cell__3W8ZQ",stone:"index_stone__oeDmm",number:"index_number__l0yF_",stone0:"index_stone0__GU0r7",bom:"index_bom__ERRzB",flag:"index_flag__Bsg_z",hoge:"index_hoge__UVxRa"}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);