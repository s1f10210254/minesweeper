(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(1042)}])},1042:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return _}});var l=t(5893),s=t(7294);let o=()=>{let e=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]].map(e=>e.map(e=>e)),[n,t]=(0,s.useState)(e),[l,o]=(0,s.useState)([[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]]),a=e=>e.toString().padStart(3,"0"),r=e=>{let n=Math.floor(e/60).toString().padStart(1,"0"),t=(e%60).toString().padStart(2,"0");return"".concat(n).concat(t)};return{userInput:n,bombMap:l,setUserInput:t,setBombMap:o,board:[[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1]],directions:[[-1,0],[-1,-1],[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1]],formatFlagCount:a,formatTime:r}},a=()=>{let{userInput:e,bombMap:n,setUserInput:t,setBombMap:l,board:s,directions:a}=o(),r=(e,t,l)=>{if(0===e)for(let[e,o]of a){let a=t+e,r=l+o;a>=0&&a<n[0].length&&r>=0&&r<n.length&&-1===s[a][r]&&i(a,r)}},i=(e,t)=>{let l=0;for(let[s,o]of a){let a=e+s,r=t+o;a>=0&&a<n[0].length&&r>=0&&r<n.length&&1===n[a][r]&&l++}s[e][t]=l,r(l,e,t)},c=!1,d=!1,_=()=>{for(let t=0;t<e.length;t++)for(let l=0;l<e[t].length;l++)1===e[t][l]?(1===n[t][l]&&(s[t][l]=11,c=!0,s.forEach((e,t)=>e.forEach((e,l)=>{1===n[t][l]&&(s[t][l]=11)})),console.log("ゲームオーバー")),0===n[t][l]&&i(t,l)):3===e[t][l]&&(s[t][l]=10),s.some(e=>e.includes(-1))||(d=!0);return s};_();let m=0===e.flat().filter(e=>1===e).length,x=(o,a)=>{console.log(o,a);for(let n=0;n<e.length;n++)for(let t=0;t<e[n].length;t++)if(11===s[n][t]||!s.some(e=>e.includes(-1)))return;let r=[...e];if(r[o][a]=1,t(r),console.log("ターン変わった！"),console.log("userInput↓"),console.table(e),m){let e=[...n],t=0;for(;t<10;){let n=Math.floor(9*Math.random()),s=Math.floor(9*Math.random());n!==o&&s!==a&&1!==e[n][s]&&(e[n][s]=1,t++),l(e)}}console.log("BombMap↓"),console.table(n),_(),console.log("board↓"),console.table(s)},f=(n,l,o)=>{n.preventDefault();for(let n=0;n<e.length;n++)for(let t=0;t<e[n].length;t++)if(11===s[n][t]||!s.some(e=>e.includes(-1)))return;let a=[...e];0===a[l][o]?a[l][o]=3:3===a[l][o]&&(a[l][o]=0),t(a)},g=e.flat().filter(e=>1===e).length,h=e.flat().filter(e=>3===e).length;return{userInput:e,bombMap:n,gameOver:c,gameWin:d,board:s,onClick:x,onRightClick:f,clickCount:g,flagCount:h}},r=(e,n)=>{let[t,l]=(0,s.useState)(0),o=e.some(e=>e.some(e=>0!==e)),a=e.some((e,t)=>e.some((e,l)=>1===e&&1===n[t][l]));return(0,s.useEffect)(()=>{let e;return o?e=setInterval(()=>{l(e=>e+1)},1e3):clearInterval(e),a&&clearInterval(e),()=>{clearInterval(e)}},[o,a]),{timer:t}};var i=t(2729),c=t.n(i);let d=()=>{let{userInput:e,bombMap:n,board:t,gameWin:s,gameOver:i,onClick:d,onRightClick:_,clickCount:m,flagCount:x}=a(),{formatFlagCount:f,formatTime:g}=o(),{timer:h}=r(e,n);return(0,l.jsxs)("div",{className:c().container,children:[(0,l.jsxs)("div",{className:c().center,children:[(0,l.jsxs)("div",{className:c().top,children:[(0,l.jsx)("div",{className:c().left,children:f(10-x)}),!i&&!s&&(0,l.jsx)("div",{className:c().betweensmile}),i&&(0,l.jsx)("div",{className:c().betweensad}),s&&(0,l.jsx)("div",{className:c().betweenwin}),(0,l.jsx)("div",{className:c().timelog,children:(0,l.jsx)("div",{children:g(h)})})]}),(0,l.jsx)("div",{className:c().board,children:t.map((e,n)=>e.map((e,t)=>(0,l.jsxs)("div",{className:c().cell,onClick:()=>d(n,t),onContextMenu:e=>_(e,n,t),children:[-1===e&&(0,l.jsx)("div",{className:c().stone}),0===e&&(0,l.jsx)("div",{className:c().stone0,style:{}}),e>0&&e<9&&(0,l.jsx)("div",{className:c().number,style:{backgroundPosition:-30*e+30}}),10===e&&(0,l.jsx)("div",{className:c().flag}),11===e&&(0,l.jsx)("div",{className:c().bom})]},"".concat(n,"-").concat(t))))})]}),(0,l.jsxs)("div",{className:c().rilog,children:[i&&(0,l.jsx)("div",{className:c().gameover,children:(0,l.jsx)("div",{children:(0,l.jsxs)("p",{children:["ゲームオーバー",(0,l.jsx)("br",{}),"時間:",g(h),(0,l.jsx)("br",{}),"クリック数：",m," + ",x]})})}),s&&(0,l.jsx)("div",{className:c().gamewin,children:(0,l.jsx)("div",{children:(0,l.jsxs)("p",{children:["おめでとう！",(0,l.jsx)("br",{}),"時間:",g(h)," ",(0,l.jsx)("br",{}),"クリック数:",m," + ",x]})})})]})]})};var _=d},2729:function(e){e.exports={container:"index_container__gnN1f",center:"index_center__CCiNa",top:"index_top__uMqHF",left:"index_left__OQaUt",betweensmile:"index_betweensmile__8WRy6",betweensad:"index_betweensad__RuTSt",betweenwin:"index_betweenwin__TJR5s",timelog:"index_timelog___gLIh",rilog:"index_rilog__dB4d8",gameover:"index_gameover__2nrQv",gamewin:"index_gamewin__4k7yS",board:"index_board__2d6xe",cell:"index_cell__3W8ZQ",stone:"index_stone__oeDmm",number:"index_number__l0yF_",stone0:"index_stone0__GU0r7",bom:"index_bom__ERRzB",flag:"index_flag__Bsg_z",hoge:"index_hoge__UVxRa"}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);